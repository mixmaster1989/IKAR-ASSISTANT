# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –∞–¥–º–∏–Ω—Å–∫–∏—Ö API —Ñ—É–Ω–∫—Ü–∏–π

## üìã –ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ–º
–ü–æ—Å–ª–µ –≤—ã–Ω–µ—Å–µ–Ω–∏—è –∞–¥–º–∏–Ω—Å–∫–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π –∏–∑ `telegram.py` –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å `admin_api.py` –Ω—É–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç

### –®–∞–≥ 1: –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
```powershell
# –û—Ç–∫—Ä–æ–π—Ç–µ –ø–µ—Ä–≤—ã–π —Ç–µ—Ä–º–∏–Ω–∞–ª PowerShell –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ IKAR
cd backend
python main.py
```

–î–æ–∂–¥–∏—Ç–µ—Å—å —Å–æ–æ–±—â–µ–Ω–∏—è –æ –∑–∞–ø—É—Å–∫–µ —Å–µ—Ä–≤–µ—Ä–∞ (–æ–±—ã—á–Ω–æ –Ω–∞ –ø–æ—Ä—Ç—É 8000).

### –®–∞–≥ 2: –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç
```powershell
# –û—Ç–∫—Ä–æ–π—Ç–µ –≤—Ç–æ—Ä–æ–π —Ç–µ—Ä–º–∏–Ω–∞–ª PowerShell –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ IKAR
.\test_admin_api.ps1
```

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏:
```powershell
# –ü–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥ —Å –ø–æ–ª–Ω—ã–º–∏ –æ—Ç–≤–µ—Ç–∞–º–∏ API
.\test_admin_api.ps1 -Verbose

# –¢–µ—Å—Ç –Ω–∞ –¥—Ä—É–≥–æ–º –ø–æ—Ä—Ç—É
.\test_admin_api.ps1 -BaseUrl "http://localhost:3000"
```

## üß™ –ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è

### 1. **GET /api/admin/groups** - –°–ø–∏—Å–æ–∫ –≥—Ä—É–ø–ø
- ‚úÖ **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –≥—Ä—É–ø–ø –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- ‚ùå **–í–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏**: 500 –µ—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

### 2. **GET /api/admin/debug_groups** - –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- ‚úÖ **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≥—Ä—É–ø–ø–∞—Ö, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö, —Å–æ–æ–±—â–µ–Ω–∏—è—Ö
- ‚ùå **–í–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏**: 500 –µ—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

### 3. **GET /api/admin/channel_status** - –°—Ç–∞—Ç—É—Å –∫–∞–Ω–∞–ª–∞
- ‚úÖ **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –∫–∞–Ω–∞–ª–∞
- ‚ùå **–í–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏**: 500 –µ—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π

### 4. **POST /api/admin/set_name** - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: `{"status": "ok", "chat_id": "...", "user_id": "...", "name": "..."}`
- ‚ùå **–í–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏**: 
  - 400 –µ—Å–ª–∏ –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω—ã –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
  - 500 –µ—Å–ª–∏ –æ—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –±–∞–∑—É

### 5. **POST /api/admin/channel_toggle** - –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–∞–Ω–∞–ª–∞
- ‚úÖ **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: `{"status": "ok", "enabled": true/false, "message": "..."}`
- ‚ùå **–í–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏**: 500 –µ—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π

### 6. **POST /api/admin/create_soul** - –°–æ–∑–¥–∞–Ω–∏–µ –¥—É—à–∏ –≥—Ä—É–ø–ø—ã
- ‚úÖ **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: `{"status": "ok", "chat_id": "...", "result": "..."}`
- ‚ùå **–í–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏**: 
  - 400 –µ—Å–ª–∏ –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω chat_id
  - 500 –µ—Å–ª–∏ –æ—à–∏–±–∫–∞ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Å–æ–∑–¥–∞–Ω–∏—è –¥—É—à–∏ –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å LLM API

## üìä –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### ‚úÖ –£—Å–ø–µ—à–Ω—ã–π —Ç–µ—Å—Ç –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:
```
üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–¥–º–∏–Ω—Å–∫–∏—Ö API —Ñ—É–Ω–∫—Ü–∏–π
üìç –ë–∞–∑–æ–≤—ã–π URL: http://localhost:8000
==================================================

üîå –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞...
‚úÖ –°–µ—Ä–≤–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω

üîç –¢–µ—Å—Ç: –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≥—Ä—É–ø–ø
üì§ GET /api/admin/groups
‚úÖ –£—Å–ø–µ—à–Ω–æ (200)
üìä –ù–∞–π–¥–µ–Ω–æ –≥—Ä—É–ø–ø: 2

üîç –¢–µ—Å—Ç: –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≥—Ä—É–ø–ø–∞—Ö
üì§ GET /api/admin/debug_groups
‚úÖ –£—Å–ø–µ—à–Ω–æ (200)

üîç –¢–µ—Å—Ç: –°—Ç–∞—Ç—É—Å –∫–∞–Ω–∞–ª–∞
üì§ GET /api/admin/channel_status
‚úÖ –£—Å–ø–µ—à–Ω–æ (200)
üìä –í–∫–ª—é—á–µ–Ω–æ: False

üîç –¢–µ—Å—Ç: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
üì§ POST /api/admin/set_name
‚úÖ –£—Å–ø–µ—à–Ω–æ (200)
üìä –°—Ç–∞—Ç—É—Å: ok

üîç –¢–µ—Å—Ç: –í–∫–ª—é—á–µ–Ω–∏–µ –∫–∞–Ω–∞–ª–∞
üì§ POST /api/admin/channel_toggle
‚úÖ –£—Å–ø–µ—à–Ω–æ (200)
üìä –°—Ç–∞—Ç—É—Å: ok

üîç –¢–µ—Å—Ç: –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∫–∞–Ω–∞–ª–∞
üì§ POST /api/admin/channel_toggle
‚úÖ –£—Å–ø–µ—à–Ω–æ (200)
üìä –°—Ç–∞—Ç—É—Å: ok

==================================================
üèÅ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!
```

### ‚ùå –ï—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∏:
```
üîç –¢–µ—Å—Ç: –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≥—Ä—É–ø–ø
üì§ GET /api/admin/groups
‚ùå –û—à–∏–±–∫–∞ (500): Internal Server Error
üìã –î–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏: {"detail": "no such table: group_history"}
```

## üîß –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: –°–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
```
‚ùå –°–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω! –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ http://localhost:8000
```
**–†–µ—à–µ–Ω–∏–µ**: –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä –∫–æ–º–∞–Ω–¥–æ–π `cd backend && python main.py`

### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```
‚ùå –û—à–∏–±–∫–∞ (500): no such table: group_history
```
**–†–µ—à–µ–Ω–∏–µ**: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞. –ù—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –±–∞–∑—É.

### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∏ –∏–º–ø–æ—Ä—Ç–∞
```
‚ùå –û—à–∏–±–∫–∞ (500): cannot import name 'analyze_group_history' from 'api.telegram'
```
**–†–µ—à–µ–Ω–∏–µ**: –§—É–Ω–∫—Ü–∏—è `analyze_group_history` –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –≤ telegram.py. –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã –≤ admin_api.py.

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ—Ç –≥—Ä—É–ø–ø –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
```
‚ö†Ô∏è –ü—Ä–æ–ø—É—Å–∫ —Ç–µ—Å—Ç–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏–º–µ–Ω–∏ - –Ω–µ—Ç –≥—Ä—É–ø–ø
```
**–†–µ—à–µ–Ω–∏–µ**: –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –µ—Å–ª–∏ –≤ –±–∞–∑–µ –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö. –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤—Å–µ —Ä–∞–≤–Ω–æ —Ç–µ—Å—Ç–∏—Ä—É—é—Ç—Å—è.

## üéØ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞

1. ‚úÖ –í—Å–µ GET –∑–∞–ø—Ä–æ—Å—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç 200
2. ‚úÖ –í—Å–µ POST –∑–∞–ø—Ä–æ—Å—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç 200 —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º JSON
3. ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –∏–º–ø–æ—Ä—Ç–∞ –∏–ª–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
4. ‚úÖ –õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫

–ï—Å–ª–∏ –≤—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—à–ª–∏ —É—Å–ø–µ—à–Ω–æ - —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –≤—ã–ø–æ–ª–Ω–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ! üéâ