#!/usr/bin/env python3
"""
–¢–µ—Å—Ç –æ—á–∏—Å—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –æ—Ç —Å–ª–æ–≤–∞ "–±–æ—Ç"
"""

import sys
import os
from pathlib import Path

# –î–æ–±–∞–≤–ª—è–µ–º –ø—É—Ç—å –∫ –º–æ–¥—É–ª—è–º
sys.path.append(str(Path(__file__).parent))

def test_query_cleaning():
    """–¢–µ—Å—Ç–∏—Ä—É–µ–º –æ—á–∏—Å—Ç–∫—É –∑–∞–ø—Ä–æ—Å–æ–≤"""
    
    try:
        from ikar_internet_integration import IKARInternetIntegration
        
        print("üß™ –¢–µ—Å—Ç–∏—Ä—É–µ–º –æ—á–∏—Å—Ç–∫—É –∑–∞–ø—Ä–æ—Å–æ–≤ –æ—Ç —Å–ª–æ–≤–∞ '–±–æ—Ç'...")
        
        integration = IKARInternetIntegration()
        
        # –¢–µ—Å—Ç–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã
        test_queries = [
            "–ë–æ—Ç, —Ä–∞—Å—Å–∫–∞–∂–∏ —á—Ç–æ –ø–æ –ø–æ–≥–æ–¥–µ –≤ –®–∞—Ö—Ç–∞—Ö –Ω–∞ —Å–µ–≥–æ–¥–Ω—è",
            "–±–æ—Ç, –∫–∞–∫–∏–µ –Ω–æ–≤–æ—Å—Ç–∏?",
            "–ë–æ—Ç, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å –±–∏—Ç–∫–æ–∏–Ω–æ–º?",
            "–±–æ—Ç—É —Ä–∞—Å—Å–∫–∞–∂–∏ –ø—Ä–æ –ø–æ–≥–æ–¥—É",
            "–±–æ—Ç –ø–æ—Å–º–æ—Ç—Ä–∏ —á—Ç–æ –Ω–æ–≤–æ–≥–æ",
            "–ë–æ—Ç, –Ω–∞–π–¥–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞—Ö",
            "–±–æ—Ç, —á—Ç–æ –ø–æ –Ω–æ–≤–æ—Å—Ç—è–º —Å–µ–≥–æ–¥–Ω—è?",
            "–ë–æ—Ç, —Ä–∞—Å—Å–∫–∞–∂–∏ –ø—Ä–æ –ø–æ–≥–æ–¥—É –≤ –ú–æ—Å–∫–≤–µ",
            "–±–æ—Ç, –∫–∞–∫–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏?",
            "–ë–æ—Ç, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –º–∏—Ä–µ?"
        ]
        
        for query in test_queries:
            print(f"\nüîç –¢–µ—Å—Ç–∏—Ä—É–µ–º: '{query}'")
            
            # –û—á–∏—â–∞–µ–º –∑–∞–ø—Ä–æ—Å
            cleaned = integration._clean_search_query(query)
            print(f"   –û—á–∏—â–µ–Ω–Ω—ã–π: '{cleaned}'")
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω—É–∂–µ–Ω –ª–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–ø–æ–∏—Å–∫
            needs_search, search_query, confidence = integration.needs_internet_search(query)
            print(f"   –ù—É–∂–µ–Ω –ø–æ–∏—Å–∫: {needs_search}")
            print(f"   –ü–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å: '{search_query}'")
            print(f"   –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: {confidence:.2f}")
        
        print("\nüéâ –¢–µ—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω!")
        
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∞: {e}")
        import traceback
        traceback.print_exc()

if __name__ == "__main__":
    test_query_cleaning() 