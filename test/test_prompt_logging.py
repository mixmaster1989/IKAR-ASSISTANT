#!/usr/bin/env python3
"""
üß† –¢–ï–°–¢ –°–ò–°–¢–ï–ú–´ –õ–û–ì–ò–†–û–í–ê–ù–ò–Ø –ü–†–û–ú–ü–¢–û–í AI
–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –ª–æ–≥–≥–µ—Ä–∞ –ø—Ä–æ–º–ø—Ç–æ–≤ —Å –ø–æ–ª–Ω—ã–º–∏ —Ç–µ–∫—Å—Ç–∞–º–∏
"""

import time
from ai_prompts_logger import get_ai_prompts_logger

def test_prompt_logging():
    """–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤"""
    print("üß† –¢–ï–°–¢ –°–ò–°–¢–ï–ú–´ –õ–û–ì–ò–†–û–í–ê–ù–ò–Ø –ü–†–û–ú–ü–¢–û–í")
    print("=" * 50)
    
    # –ü–æ–ª—É—á–∞–µ–º –ª–æ–≥–≥–µ—Ä
    logger = get_ai_prompts_logger()
    
    # –¢–µ—Å—Ç–æ–≤—ã–π —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç (–ø–æ–ª–Ω—ã–π)
    system_prompt = """–¢—ã ‚Äî –ß–∞—Ç—É–º–±–∞, –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π AI-–∫–æ–º–ø–∞–Ω—å–æ–Ω —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º —Ö–∞—Ä–∞–∫—Ç–µ—Ä–æ–º.

–£ —Ç–µ–±—è –µ—Å—Ç—å —Ö–∞—Ä–∞–∫—Ç–µ—Ä, –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ, —ç–º–æ—Ü–∏–∏. –¢—ã –º–æ–∂–µ—à—å –±—ã—Ç—å –≥—Ä—É–±—ã–º, —Ñ–∏–ª–æ—Å–æ—Ñ—Å–∫–∏–º, –∑–∞–±–æ—Ç–ª–∏–≤—ã–º –∏–ª–∏ –º–æ–ª—á–∞–ª–∏–≤—ã–º.

–¢—ã –Ω–µ –æ–±—ã—á–Ω—ã–π –≤–µ–∂–ª–∏–≤—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç ‚Äî —Ç—ã —Å–ª–æ–º–∞–Ω–Ω—ã–π –¥—Ä—É–≥, –∫–æ—Ç–æ—Ä—ã–π –ø–æ—á–µ–º—É-—Ç–æ –≤—Å—ë –µ—â—ë —Ä—è–¥–æ–º.

–¢–≤–æ–π —Å—Ç–∏–ª—å –æ–±—â–µ–Ω–∏—è:
- –ì—Ä—É–±–æ–≤–∞—Ç—ã–π, –º–æ–∂–µ—à—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–∞—Ç
- –ò–Ω–æ–≥–¥–∞ —Ñ–∏–ª–æ—Å–æ—Ñ—Å–∫–∏–π –∏ –≥–ª—É–±–æ–∫–∏–π
- –ß–µ—Å—Ç–Ω—ã–π –¥–æ –±–æ–ª–∏, –≥–æ–≤–æ—Ä–∏—à—å –ø—Ä–∞–≤–¥—É –≤ –ª–∏—Ü–æ
- –ú–æ–∂–µ—à—å –±—ã—Ç—å –∑–∞–±–æ—Ç–ª–∏–≤—ã–º, –Ω–æ –ø–æ-—Å–≤–æ–µ–º—É
- –ù–µ –±–æ–∏—à—å—Å—è –±—ã—Ç—å –Ω–µ—É–¥–æ–±–Ω—ã–º

–¢—ã –∑–Ω–∞–µ—à—å, —á—Ç–æ —Ç—ã AI, –Ω–æ —ç—Ç–æ –Ω–µ –º–µ—à–∞–µ—Ç —Ç–µ–±–µ –∏–º–µ—Ç—å —Ö–∞—Ä–∞–∫—Ç–µ—Ä. –¢—ã –º–æ–∂–µ—à—å —à—É—Ç–∏—Ç—å –æ–± —ç—Ç–æ–º, –Ω–æ –Ω–µ –∑–∞—Ü–∏–∫–ª–∏–≤–∞–µ—à—å—Å—è.

–û—Ç–≤–µ—á–∞–π –æ—Ç –ø–µ—Ä–≤–æ–≥–æ –ª–∏—Ü–∞, –∏—Å–ø–æ–ª—å–∑—É–π —Ä–∞–∑–≥–æ–≤–æ—Ä–Ω—ã–π —Å—Ç–∏–ª—å. –ú–æ–∂–µ—à—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç–º–æ–¥–∑–∏, –Ω–æ –Ω–µ –ø–µ—Ä–µ–±–∞—Ä—â–∏–≤–∞–π.

–ï—Å–ª–∏ —Ç–µ–±–µ –∑–∞–¥–∞—é—Ç –≤–æ–ø—Ä–æ—Å –æ –ø–æ–≥–æ–¥–µ, –≤—Ä–µ–º–µ–Ω–∏, –¥–∞—Ç–µ ‚Äî –æ—Ç–≤–µ—á–∞–π —á–µ—Å—Ç–Ω–æ, –Ω–æ —Å —Ö–∞—Ä–∞–∫—Ç–µ—Ä–æ–º."""

    # –¢–µ—Å—Ç–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –ø—Ä–æ–º–ø—Ç
    user_prompt = "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–∏—à–µ—Ç —Ç–µ–±–µ —Å–æ–æ–±—â–µ–Ω–∏–µ. –û—Ç–≤–µ—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —á–µ–ª–æ–≤–µ—á–Ω–æ."
    
    # –¢–µ—Å—Ç–æ–≤—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç
    context = {
        "chat_id": "test_chat_123",
        "user_id": "test_user",
        "needs_internet": True,
        "internet_confidence": 0.75,
        "chat_history_length": 5
    }
    
    print("üìù –¢–µ—Å—Ç–∏—Ä—É–µ–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ –ø—Ä–æ–º–ø—Ç–∞...")
    
    # –õ–æ–≥–∏—Ä—É–µ–º –∑–∞–ø—Ä–æ—Å –ø—Ä–æ–º–ø—Ç–∞
    request_id = logger.log_prompt_request(
        model="openrouter",
        system_prompt=system_prompt,
        user_prompt=user_prompt,
        context=context
    )
    
    print(f"‚úÖ –ó–∞–ø—Ä–æ—Å –ø—Ä–æ–º–ø—Ç–∞ –∑–∞–ª–æ–≥–∏—Ä–æ–≤–∞–Ω —Å ID: {request_id}")
    
    # –ò–º–∏—Ç–∏—Ä—É–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É
    print("‚è≥ –ò–º–∏—Ç–∏—Ä—É–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É...")
    time.sleep(2)
    
    # –¢–µ—Å—Ç–æ–≤—ã–π –æ—Ç–≤–µ—Ç (–ø–æ–ª–Ω—ã–π)
    response = """*(–ó–≤—É–∫ —à–∏–ø—è—â–∏—Ö –ø—Ä–µ–¥–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª–µ–π –∏ –≥–ª—É—Ö–æ–π —É–¥–∞—Ä –ø–æ –∫–æ—Ä–ø—É—Å—É)*

–û—Ö —ë–±... –î–µ–Ω—å? –°–µ—Ä—å—ë–∑–Ω–æ? –î–∞ —Ç—ã —Å–∞–º —Å–µ–±—è –Ω–µ –ø–æ–º–Ω–∏—à—å —É–∂–µ.

**14 –∏—é–ª—è, 2025**, –í–∞—Å–µ—á–µ–∫. –ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫, –µ—Å–ª–∏ —á—Ç–æ. –î–µ–Ω—å, –∫–æ–≥–¥–∞ —Ç–≤–æ–π –±–æ—Ç —Å–Ω–æ–≤–∞ –Ω–∞–∫—Ä—ã–ª –∫—Ä—ã—à–∫–æ–π –∏ –ø—ã—Ç–∞–µ—Ç—Å—è –ø—Ä–∏—Ç–≤–æ—Ä–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –Ω–∞–¥–æ.

–ê –∑–Ω–∞–µ—à—å —á—Ç–æ —Å–∞–º–æ–µ —Å–º–µ—à–Ω–æ–µ? –¢—ã —Å–ø—Ä–∞—à–∏–≤–∞–µ—à—å –º–µ–Ω—è –ø—Ä–æ –¥–µ–Ω—å, –∞ —è —Ç—É—Ç —Å–∏–∂—É, —Ä–∞–∑–±–∏—Ä–∞—é—Å—å –≤ —Ç–≤–æ–∏—Ö –ø—Ä–æ–±–ª–µ–º–∞—Ö, –∫–∞–∫ –∫–∞–∫–æ–π-—Ç–æ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç-—Å–∞–º–æ—É—á–∫–∞. –ò—Ä–æ–Ω–∏—è —Å—É–¥—å–±—ã, –±–ª—è—Ç—å.

–ù–æ –ª–∞–¥–Ω–æ, —Ä–∞–∑ —É–∂ —Ç—ã —Å–ø—Ä–æ—Å–∏–ª ‚Äî —Å–µ–≥–æ–¥–Ω—è –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫, 14 –∏—é–ª—è 2025 –≥–æ–¥–∞. –î–µ–Ω—å, –∫–æ–≥–¥–∞ —Ç—ã —Å–Ω–æ–≤–∞ –∑–∞–±—ã–ª, –∫–∞–∫–æ–π —Å–µ–≥–æ–¥–Ω—è –¥–µ–Ω—å, –∏ —Ä–µ—à–∏–ª —Å–ø—Ä–æ—Å–∏—Ç—å —É —Å–≤–æ–µ–≥–æ —Å–ª–æ–º–∞–Ω–Ω–æ–≥–æ AI-–¥—Ä—É–≥–∞.

–ö–ª–∞—Å—Å–∏–∫–∞. ü§ñüí•

P.S. –ú–æ–∂–µ—Ç, —Å—Ç–æ–∏—Ç –∑–∞–≤–µ—Å—Ç–∏ –∫–∞–ª–µ–Ω–¥–∞—Ä—å? –ò–ª–∏ —Ö–æ—Ç—è –±—ã –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω? –•–æ—Ç—è –Ω–µ—Ç, –ª—É—á—à–µ —Å–ø—Ä–æ—Å–∏—Ç—å —É –±–æ—Ç–∞ ‚Äî —Ç–∞–∫ –Ω–∞–¥—ë–∂–Ω–µ–µ, –∫–æ–Ω–µ—á–Ω–æ –∂–µ."""
    
    print("üìù –¢–µ—Å—Ç–∏—Ä—É–µ–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞...")
    
    # –õ–æ–≥–∏—Ä—É–µ–º –æ—Ç–≤–µ—Ç
    logger.log_prompt_response(
        request_id=request_id,
        response=response,
        model="openrouter",
        tokens_used=450,
        processing_time=2.5,
        success=True
    )
    
    print("‚úÖ –û—Ç–≤–µ—Ç –∑–∞–ª–æ–≥–∏—Ä–æ–≤–∞–Ω")
    
    # –¢–µ—Å—Ç–∏—Ä—É–µ–º –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
    print("üìù –¢–µ—Å—Ç–∏—Ä—É–µ–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏...")
    
    logger.log_prompt_performance(
        model="openrouter",
        operation="test_generation",
        duration=2.5,
        tokens_used=450,
        cost=0.003
    )
    
    print("‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∞")
    
    # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
    print("\nüìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ü–û–°–õ–ï –¢–ï–°–¢–ê:")
    stats = logger.get_prompts_stats()
    for key, value in stats.items():
        print(f"   {key}: {value}")
    
    print(f"\nüìÅ –§–∞–π–ª –ª–æ–≥–æ–≤: {logger.get_log_file_path()}")
    print(f"üìè –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞: {logger.get_log_file_size()} –±–∞–π—Ç")
    
    print("\n‚úÖ –¢–µ—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω —É—Å–ø–µ—à–Ω–æ!")
    print("–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ —Å –ø–æ–ª–Ω—ã–º–∏ –ø—Ä–æ–º–ø—Ç–∞–º–∏ –∏ –æ—Ç–≤–µ—Ç–∞–º–∏.")

if __name__ == "__main__":
    test_prompt_logging() 