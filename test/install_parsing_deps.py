#!/usr/bin/env python3
"""
–ë—ã—Å—Ç—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –ø–∞—Ä—Å–∏–Ω–≥–∞
"""

import subprocess
import sys

def install_package(package_name):
    """–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø–∞–∫–µ—Ç —á–µ—Ä–µ–∑ pip"""
    try:
        print(f"üì¶ –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é {package_name}...")
        result = subprocess.run([sys.executable, "-m", "pip", "install", package_name], 
                              capture_output=True, text=True, check=True)
        print(f"‚úÖ {package_name} —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω")
        return True
    except subprocess.CalledProcessError as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ {package_name}: {e.stderr}")
        return False

def main():
    print("üöÄ –ë–´–°–¢–†–ê–Ø –£–°–¢–ê–ù–û–í–ö–ê –ó–ê–í–ò–°–ò–ú–û–°–¢–ï–ô –ü–ê–†–°–ò–ù–ì–ê")
    print("=" * 50)
    
    # –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞
    critical_deps = [
        "trafilatura",
        "newspaper3k", 
        "readability-lxml",
        "justext",
        "beautifulsoup4",
        "lxml",
        "requests",
        "aiohttp",
        "feedparser",
        "htmldate",
        "langdetect",
        "nltk",
        "textstat",
        "python-dateutil"
    ]
    
    success_count = 0
    failed_count = 0
    
    for package in critical_deps:
        if install_package(package):
            success_count += 1
        else:
            failed_count += 1
    
    print("\n" + "=" * 50)
    print(f"üìä –†–ï–ó–£–õ–¨–¢–ê–¢: {success_count} —É—Å–ø–µ—à–Ω–æ, {failed_count} –Ω–µ—É–¥–∞—á–Ω–æ")
    
    if failed_count == 0:
        print("üéâ –í–°–ï –ó–ê–í–ò–°–ò–ú–û–°–¢–ò –£–°–¢–ê–ù–û–í–õ–ï–ù–´ –£–°–ü–ï–®–ù–û!")
    else:
        print(f"‚ö†Ô∏è  {failed_count} –ø–∞–∫–µ—Ç–æ–≤ –Ω–µ —É–¥–∞–ª–æ—Å—å —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å")
        print("–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏—Ö –≤—Ä—É—á–Ω—É—é –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞")

if __name__ == "__main__":
    main() 